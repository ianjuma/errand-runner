<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Tasks</title>
        <link rel="stylesheet" href="{{url_for('static', filename='css/bootstrap-other.css') }}">
        <link rel="stylesheet" href="{{url_for('static', filename='css/datepicker.css') }}">
        <link rel="stylesheet" href="{{url_for('static', filename='css/pos-style.css') }}">
        <link rel="stylesheet" href="{{url_for('static', filename='css/nprogress.css') }}">
        <link rel="shortcut icon" href="{{url_for('static', filename='ico/favicon.ico') }}">

		<script src="{{url_for('static', filename='js/jquery.js') }}"></script>
        <script src="{{url_for('static', filename='js/nprogress.js') }}"></script>
        <script src="{{url_for('static', filename='js/renderTasks.js') }}"></script>

        <link rel="author" href="humans.txt">
    </head>
    <body>

		 <nav class="navbar navbar-inverse navbar-static-top" role="navigation">
  			<div class="container">
  				<ul class="nav nav-pills">
  					<a class="navbar-brand" href="/">TasKwangu</a>
			  		
			  		<li>
			  		<button type="button" onClick="window.location.href = '/tasks/'+username" class="btn buttons-top button-botton">New Task
						<span class="glyphicon glyphicon-plus"></span>
					</button>
					</li>
					<li>
					<button type="button" onClick="window.location.href = '/allTasks/'+username" class="btn buttons-top button-botton">My Tasks
						<span class="glyphicon glyphicon-hdd"></span>
					</button>
					</li>

					<li>
					<button type="button" onClick="window.location.href = '/profile/'+username" class="btn buttons-top button-botton">Profile
						<span class="glyphicon glyphicon-user"></span>
					</button>
					</li>

					<li>
					<button type="button" onClick="window.location.href = '/'" class="btn btn-danger buttons-top button-botton">Log Out
						<span class="glyphicon glyphicon-log-out"></span>
					</button>
					</li>

					<li>
					<button type="button" onClick="window.location.href = 'https://docs.google.com/forms/d/1JNhamPDhKgxwRWDObIJ8fsfmit6JbtWL6zZRkDZcFuc/viewform?c=0&w=1&usp=mail_form_link'" class="btn btn-info buttons-top button-botton">Help Us
						<span class="glyphicon glyphicon-comment"></span>
					</button>
					</li>


				</ul>
  			</div>
		</nav>


		<div id="alert-all">
		</div>

		<div class="middle">
			<table class="table table-striped table-hover">
				<thead>
		        <tr>
		            <th>Task Title</th>
		            <th>Task Progress</th>
		            <th>Description</th>
		            <th>Track Task</th>
		        </tr>
    			</thead>
			    <tbody id="allTasks">


			    	<!--
			        <tr>
			            <td id="task-title"> ... </td>
			            <td id="task-status"> ... </td>
			            <td id="task-desc"> ... </td>
			            <td><a href="#">#7259346</a></td>
			        </tr>
			        <tr>
			            <td id="task-title2"> ... </td>
			            <td id="task-status2"> ... </td>
			            <td id="task-desc2"> ... </td>
			            <td><a href="#">#7671286</a></td>
			        </tr>
			        <tr>
			            <td id="task-title3"> ... </td>
			            <td id="task-status3"> ... </td>
			            <td id="task-desc3"> ... </td>
			            <td><a href="#">#1125687</a></td>
			        </tr>
			        -->
			    </tbody>
			</table>
		</div>

        <script src="{{url_for('static', filename='js/bootstrap-datepicker.js') }}"></script>
        <script src="{{url_for('static', filename='js/bootstrap.js') }}"></script>
        <script src="{{url_for('static', filename='js/underscore.js') }}"></script>

        <script>

          $(document).on('page:fetch',   function() { NProgress.set(0.0); });
		  $(document).on('page:change',  function() { NProgress.set(1.0); });

          var username = "{{username}}";
          console.log(username);
          resultData = Object();

		  // get all tasks post request
		  data = { "username": username };

		  userData = JSON.stringify(data);
		  console.log(userData);
		  NProgress.start();

		  $.ajax({
		    type: 'POST',
		    url: '/api/getTasks/',
		    contentType: 'application/json',

		    success: function(result) {
		      console.log(result);
		      resultData = result;
		      renderTasks(result);
		      NProgress.done();
		    },
		    fail: function(result) {
		      alert('Failed to send Data');
		    },
		    data: userData
		  });
		  
        </script>

    </body>
</html>